////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
// START FIREBASE
////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////

var config = {
	apiKey: "AIzaSyDquIdmKQfr-QGF3kyEb28FzAboOPBE36g",
	authDomain: "disco-6a3bf.firebaseapp.com",
	databaseURL: "https://disco-6a3bf.firebaseio.com",
	projectId: "disco-6a3bf",
	storageBucket: "disco-6a3bf.appspot.com",
	messagingSenderId: "71660981931"
};
firebase.initializeApp(config);

firebase.auth().onAuthStateChanged(function (user) {
	if (user) {
		console.log("Welcome " + user.displayName);
		// User is signed in.
	} else {
		// No user is signed in.
		//	window.open("createAccount.html", "_self");

	}
});

////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
// SHARED VARIABLES
////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////


var savedCreator = {
	username: "Username",
	uid: "Uid",
	publicName: "My Profile"
}



////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
// SHARED JS
////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////


function tryLogin() {

	firebase.auth().onAuthStateChanged(function (user) {
		if (user) {
			// User is signed in.
			userUsername = user.displayName;
			userUid = user.uid;

			firebase.database().ref('/users/' + userUsername + "/details/publicName").once('value').then(function (snapshot) {
				var userPublicName = snapshot.val();

				var rawCreator = {
					username: userUsername,
					uid: userUid,
					publicName: userPublicName
				}

				saveCreator(rawCreator);


			});
		} else {
			// No user is signed in.
			console.log("NOT logged in");

		}
	});
}

function saveCreator(incomingCreator) {
	savedCreator = incomingCreator;
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////// RUN SCRIPT 
//////////////////////////////////////////////////////////////////////////////////////////////////////////

tryLogin();
